# Liquibase

## Liquibase. Обзор

[Официальный сайт](https://docs.liquibase.com/home.html)

Полезные ссылки:

* [Управление миграциями БД с Liquibase](https://habr.com/ru/articles/178665/)
* [Использование Liquibase без головной боли. 10 советов из опыта реальной разработки](https://habr.com/ru/articles/179425/)

Цель технологии: облегчить работу со структурой базы данных путем написания команд изменения структуры БД в виде скриптов, так называемых changeset-ов.
Общий процесс: программист создает changeset, в котором описывает какое-то изменение в структуре БД, объединяет
changeset-ы в файл, который называется changelog-ом. В процессе старта приложения оно читает changelog файлы, смотрит, которые из changeset-ов еще не были выполнены и выполняет их в БД, внося тем самым в ее структуру необходимые изменения. Факт выполнения changeset-а сохраняется в отдельную таблицу БД, что исключает повторное выполнение changeset-а.

## Liquibase. Описание changelog файлов

changelog файлы могу быть созданы в [следующих форматах](https://docs.liquibase.com/concepts/changelogs/home.html):

* SQL
* XML
* YAML
* JSON

Примеры каждого из форматов можно посмотреть в официальной документации [Changelog](https://docs.liquibase.com/concepts/changelogs/home.html)

## Liquibase. Интеграция в проект SpringBoot

Обычно changelog-и располагаются в папке *resources/db/changelog*. Хорошей практикой считается создание так называемого коммулятивного changelog-а - changelog-а, в котором хранятся ссылки на все остальные changelog-и, в которых уже непосредственно содержаться changeset-ы.

## Liquibase. Инструменты для облегчения работы

### Intellij Idea

В данном IDE есть удобный практически бесплатный плагин "JPA Buddy" и "JPA Structure". С помощью них можно создавать changelog-и в различных форматах. changelog в формате XML валидируется.
"JPA Buddy" устанавливается через стандартный механизм подключения плагинов.
"JPA Structure" появляется в пункте меню "Views - Tool windows" после того, как к проекту подключается JPA, например в виде SpringBoot стартера.
